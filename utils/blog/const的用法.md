### C++ const 小结

const 是 constant 的缩写，本意是不变的，不易改变的意思。在 C++ 中是用来修饰**内置类型变量，自定义对象，成员函数，返回值，函数参数**。

C++ const 允许指定一个语义约束，编译器会强制实施这个约束，允许程序员告诉编译器某值是保持不变的。如果在编程中确实有**某个值保持不变**，就应该明确使用const，这样可以获得编译器的帮助。

#### 1. const修饰普通类型的变量

```c++
const int  a = 7;
int  b = a; // 正确
a = 8;       // 错误，不能改变

//不要试图对const变量设法赋值
int *p = (int*)&a;
*p = 8; 
cout << a << endl; //出现矛盾，输出a=7
cout << *b << endl; //*b=8
```



#### 2. const 修饰指针变量。

const 修饰指针变量有以下三种情况。

- A: const 修饰指针指向的内容，则内容为不可变量。
- B: const 修饰指针，则指针为不可变量。
- C: const 修饰指针和指针指向的内容，则指针和指针指向的内容都为不可变量。

```C++
const int* a=8; //A
int const* a=8; //A

int d = 1;
int* const b = &d; //B

int e = 2;
const int* const c=&e; //C
int const* const c=&e; //C
```



#### 3. const参数传递和函数返回值。

**对于 const 修饰函数参数可以分为三种情况：**

A：值传递的 const 修饰传递，一般这种情况不需要 const 修饰，因为函数会自动产生临时变量复制实参值。



B：当 const 参数为指针时，可以防止指针被意外篡改。



C：自定义类型的参数传递，需要临时对象复制参数，对于临时对象的构造，需要调用构造函数，比较浪费时间，因此我们采取 const 外加引用传递的方法。

并且对于一般的 int、double 等内置类型，我们不采用引用的传递方式，**引用是4个字节**。



**对于 const 修饰函数的返回值：**

A：const 修饰内置类型的返回值，修饰与不修饰返回值作用一样。

B: const 修饰自定义类型的作为返回值，此时返回的值不能作为左值使用，既不能被赋值，也不能被修改。

C: const 修饰返回的指针或者引用，是否返回一个指向 const 的指针，取决于我们想让用户干什么。



#### 4. const修饰类成员函数

const 修饰类成员函数，其目的是**防止成员函数修改被调用对象的值**，如果我们不想修改一个调用对象的值，所有的成员函数都应当声明为 const 成员函数。

**注意：const 关键字不能与 static 关键字同时使用**，因为 static 关键字修饰静态成员函数，静态成员函数不含有 this 指针，即不能实例化，const 成员函数必须具体到某一实例。

[1] [菜鸟教程](https://www.runoob.com/w3cnote/cpp-const-keyword.html)

[2] [博客园](https://www.cnblogs.com/Forever-Kenlen-Ja/p/3776991.html)